name: Prep-runner
description: Sets the GitHub workflow to do what we need

runs:
  using: composite
  steps:
    # Set up Go
    - name: Set up Go
      uses: actions/setup-go@v5
      with:
        go-version: "1.23"
        cache: true
    # Install go dependencies
    - name: Install Go dependencies
      run: go mod download
    # Install golangci-lint
    - name: Install golangci-lint
      run: |
        curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | \
        sh -s -- -b $(go env GOPATH)/bin latest
        echo "$(go env GOPATH)/bin" >> $GITHUB_PATH
    # Install Node.js
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: "20"
    # Install npm packages required by .githooks/pre-commit
    # These are CRITICAL for validation to pass
    - name: Install Node.js linting tools
      run: npm install -g cspell markdownlint-cli2 @cspell/dict-da-dk prettier
